#!/usr/bin/env ruby

require "rubygems"
require "eventmachine"

class RequestHandler < EventMachine::Connection
  attr_reader :args
  def initialize(args)
    @args = args
  end

  def post_init

  end

  def receive_data(data)
    p data
  end
end

def main(args)
  if args.length == 0
    puts "Usage: #{$0} <path_or_glob> [path_or_glob2] [...]"
    return 1
  end

  EventMachine.run {
    EventMachine.connect '127.0.0.1', 8081, RequestHandler, args
  }
end # def main



exit(main(ARGV))
